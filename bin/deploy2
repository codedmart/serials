#!/bin/bash

name="serials"
server="root@dev.orbit.al"
port="3001"

# Rebuild local assets
cd web && webpack && cd ..

# rsync files
rsync -rav -e ssh --delete --exclude-from .rsyncignore . $server:~/$name

# remotely compile

ssh -t -t $server << END
echo "REMOTE"
cd ~/$name
cabal sandbox init
cabal update
cabal install --only-dependencies
cabal build
END

# run with a local thing
